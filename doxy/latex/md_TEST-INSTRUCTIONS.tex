\chapter{üß™ C√≥mo Testear el Middleware }
\hypertarget{md_TEST-INSTRUCTIONS}{}\label{md_TEST-INSTRUCTIONS}\index{üß™ C√≥mo Testear el Middleware@{üß™ C√≥mo Testear el Middleware}}
\label{md_TEST-INSTRUCTIONS_autotoc_md80}%
\Hypertarget{md_TEST-INSTRUCTIONS_autotoc_md80}%
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md81}{}\doxysection{\texorpdfstring{Prerequisitos}{Prerequisitos}}\label{md_TEST-INSTRUCTIONS_autotoc_md81}
‚úÖ Docker Desktop corriendo ‚úÖ Maven instalado ‚úÖ Java 11+ instalado\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md82}{}\doxysection{\texorpdfstring{Paso 1\+: Levantar la base de datos My\+SQL}{Paso 1\+: Levantar la base de datos My\+SQL}}\label{md_TEST-INSTRUCTIONS_autotoc_md82}
Abre Power\+Shell o CMD en la carpeta del proyecto y ejecuta\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{docker\ compose\ up\ -\/d}

\end{DoxyCode}


Espera 10-\/15 segundos para que My\+SQL se inicialice.

Verifica que est√° corriendo\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{docker\ ps}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md83}{}\doxysection{\texorpdfstring{Paso 2\+: Compilar y arrancar el servidor}{Paso 2\+: Compilar y arrancar el servidor}}\label{md_TEST-INSTRUCTIONS_autotoc_md83}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md84}{}\doxysubsection{\texorpdfstring{Opci√≥n A\+: Usando el script autom√°tico (Recomendado)}{Opci√≥n A\+: Usando el script autom√°tico (Recomendado)}}\label{md_TEST-INSTRUCTIONS_autotoc_md84}

\begin{DoxyCode}{0}
\DoxyCodeLine{start-\/server.bat}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md85}{}\doxysubsection{\texorpdfstring{Opci√≥n B\+: Manual}{Opci√≥n B\+: Manual}}\label{md_TEST-INSTRUCTIONS_autotoc_md85}

\begin{DoxyCode}{0}
\DoxyCodeLine{mvn\ -\/f\ server\(\backslash\)pom.xml\ clean\ package\ -\/DskipTests}
\DoxyCodeLine{mvn\ -\/f\ server\(\backslash\)pom.xml\ spring-\/boot:run}

\end{DoxyCode}


Espera a ver este mensaje\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{Started\ RestaurantApplication\ in\ X.XXX\ seconds}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md86}{}\doxysection{\texorpdfstring{Paso 3\+: Testear los endpoints}{Paso 3\+: Testear los endpoints}}\label{md_TEST-INSTRUCTIONS_autotoc_md86}
Abre OTRA terminal (Power\+Shell o CMD) y ejecuta\+:\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md87}{}\doxysubsection{\texorpdfstring{Opci√≥n A\+: Script autom√°tico de tests (Recomendado)}{Opci√≥n A\+: Script autom√°tico de tests (Recomendado)}}\label{md_TEST-INSTRUCTIONS_autotoc_md87}
{\bfseries{Para Power\+Shell\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{.\(\backslash\)test-\/middleware.ps1}

\end{DoxyCode}


{\bfseries{Para CMD\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{test-\/middleware.bat}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md88}{}\doxysubsection{\texorpdfstring{Opci√≥n B\+: Tests manuales con curl}{Opci√≥n B\+: Tests manuales con curl}}\label{md_TEST-INSTRUCTIONS_autotoc_md88}

\begin{DoxyCode}{0}
\DoxyCodeLine{curl\ http://localhost:8080/api/info}
\DoxyCodeLine{curl\ http://localhost:8080/api/menu}
\DoxyCodeLine{curl\ -\/X\ POST\ http://localhost:8080/api/login\ -\/H\ "{}Content-\/Type:\ application/json"{}\ -\/d\ "{}\{\(\backslash\)"{}name\(\backslash\)"{}:\(\backslash\)"{}abdualmajeed\(\backslash\)"{}\}"{}}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md89}{}\doxysubsection{\texorpdfstring{Opci√≥n C\+: Tests manuales con Power\+Shell}{Opci√≥n C\+: Tests manuales con Power\+Shell}}\label{md_TEST-INSTRUCTIONS_autotoc_md89}

\begin{DoxyCode}{0}
\DoxyCodeLine{Invoke-\/RestMethod\ -\/Uri\ "{}http://localhost:8080/api/info"{}\ -\/Method\ GET}
\DoxyCodeLine{Invoke-\/RestMethod\ -\/Uri\ "{}http://localhost:8080/api/menu"{}\ -\/Method\ GET}
\DoxyCodeLine{\$body\ =\ @\{name="{}abdualmajeed"{}\}\ |\ ConvertTo-\/Json}
\DoxyCodeLine{Invoke-\/RestMethod\ -\/Uri\ "{}http://localhost:8080/api/login"{}\ -\/Method\ POST\ -\/Body\ \$body\ -\/ContentType\ "{}application/json"{}}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md90}{}\doxysection{\texorpdfstring{Respuestas esperadas}{Respuestas esperadas}}\label{md_TEST-INSTRUCTIONS_autotoc_md90}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md91}{}\doxysubsection{\texorpdfstring{GET /api/info}{GET /api/info}}\label{md_TEST-INSTRUCTIONS_autotoc_md91}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}name"{}:\ "{}Mi\ Restaurante"{},}
\DoxyCodeLine{\ \ "{}address"{}:\ "{}Calle\ Falsa\ 123"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md92}{}\doxysubsection{\texorpdfstring{GET /api/menu}{GET /api/menu}}\label{md_TEST-INSTRUCTIONS_autotoc_md92}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}mains"{}:\ [}
\DoxyCodeLine{\ \ \ \ \{"{}id"{}:\ 1,\ "{}name"{}:\ "{}Buratta\ Pizza"{},\ "{}price"{}:\ 54\},}
\DoxyCodeLine{\ \ \ \ \{"{}id"{}:\ 2,\ "{}name"{}:\ "{}Pink\ Pasta"{},\ "{}price"{}:\ 12\},}
\DoxyCodeLine{\ \ \ \ ...}
\DoxyCodeLine{\ \ ],}
\DoxyCodeLine{\ \ "{}appetizers"{}:\ [...],}
\DoxyCodeLine{\ \ "{}drinks"{}:\ [...]}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md93}{}\doxysubsection{\texorpdfstring{POST /api/login (cashier existente)}{POST /api/login (cashier existente)}}\label{md_TEST-INSTRUCTIONS_autotoc_md93}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}status"{}:\ "{}ok"{},}
\DoxyCodeLine{\ \ "{}welcome"{}:\ "{}Welcome\ abdualmajeed"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md94}{}\doxysubsection{\texorpdfstring{POST /api/login (cashier no existente)}{POST /api/login (cashier no existente)}}\label{md_TEST-INSTRUCTIONS_autotoc_md94}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}status"{}:\ "{}error"{},}
\DoxyCodeLine{\ \ "{}message"{}:\ "{}unknown\ cashier"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md95}{}\doxysection{\texorpdfstring{Cashiers v√°lidos en la base de datos}{Cashiers v√°lidos en la base de datos}}\label{md_TEST-INSTRUCTIONS_autotoc_md95}

\begin{DoxyItemize}
\item {\ttfamily abdualmajeed} (ID\+: 4231)
\item {\ttfamily abdualrahman} (ID\+: 4232)
\end{DoxyItemize}\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md96}{}\doxysection{\texorpdfstring{Detener todo}{Detener todo}}\label{md_TEST-INSTRUCTIONS_autotoc_md96}

\begin{DoxyEnumerate}
\item Detener el servidor\+: {\ttfamily Ctrl + C} en la terminal del servidor
\item Detener My\+SQL\+: {\ttfamily docker compose down}
\end{DoxyEnumerate}\hypertarget{md_TEST-INSTRUCTIONS_autotoc_md97}{}\doxysection{\texorpdfstring{Troubleshooting}{Troubleshooting}}\label{md_TEST-INSTRUCTIONS_autotoc_md97}
{\bfseries{Error\+: Connection refused}}
\begin{DoxyItemize}
\item Verifica que My\+SQL est√° corriendo\+: {\ttfamily docker ps}
\item Verifica que el servidor Spring Boot arranc√≥ correctamente (busca "{}\+Started Restaurant\+Application"{})
\end{DoxyItemize}

{\bfseries{Error\+: Unknown database \textquotesingle{}project3\textquotesingle{}}}
\begin{DoxyItemize}
\item El script init.\+sql no se ejecut√≥. Elimina el volumen y vuelve a levantar\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{docker\ compose\ down\ -\/v}
\DoxyCodeLine{docker\ compose\ up\ -\/d}

\end{DoxyCode}

\end{DoxyItemize}

{\bfseries{Error\+: Cannot find symbol (compilaci√≥n)}}
\begin{DoxyItemize}
\item Aseg√∫rate de tener Java 11 o superior\+: {\ttfamily java -\/version}
\item Limpia el proyecto\+: {\ttfamily mvn clean} 
\end{DoxyItemize}